<!DOCTYPE html>

	<html lang="en">
	
		<head>
			
			<title>Chat Box</title>
			
			<meta charset="utf-8" >
			
			<link rel="stylesheet" href="styleCB.css">
			
			
			<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
			
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
			
			<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
			
			<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
			
			<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
			
		
		</head>
		
		<body>
				<div class="container">
					
					<div class="row">
					
						<div class="col-md-4 class1">
			
							<div id="list1">
								<h2>Chat Members</h2>
								
								
								<table class="table table-striped table-hover" id="t1">
									<thead></thead>
									<tbody id="tb1"></tbody>
								<table>
								
								
							</div>
						
						
						
						
						</div>
						
						<div class="col-md-8 class2">
						
							<div class="card-deck">
							<div class="openChat">
								<div class="card bg-secondary">
									<div class="card-body">
										<p class="card-text">
											<textarea  name="msgBox" required rows="15" id="myTextArea"></textarea>
											<input type="text" placeholder="Type Message" name="msg" id="textmsg"></input>
									
											<button type="button" class="btn btn-primary" onclick="sendForm()">Send</button>
											<button type="button" class="btn btn-danger" onclick="closeForm()" >Close</button>
										</p>
									</div>
								
						
						
								</div>
						
							</div>
						
							</div>
						</div>
					
					</div>
				</div>
			
			
			
			
			
		
			<script>
				
				
				var user=[{"fname": "John", "lname": "Doe","age": 25, "src": "Tulips.jpg" },
						{"fname": "Sam", "lname": "Roxy","age": 10, "src": "Penguins.jpg"},
						{"fname": "Ria", "lname": "Kumar","age": 16, "src": "Tulips.jpg"},
						{"fname": "Sana", "lname": "Khan","age": 45, "src": "Penguins.jpg"},
						{"fname": "Zen", "lname": "Mir","age": 75, "src": "Tulips.jpg"}
						];
				
				
				var count=1;
				for(var i=0; i<user.length; i++)
				{
					var x, txt="";
					for(x in user[i])
						{
							if(x=="src")
							{
								
								var source=user[i][x];
								
							}
							else {
									txt+=user[i][x]+" ";
								}
							
						}
					
				
					var image=document.createElement("img");
					image.src=source;
					var butn=document.createElement("button");
					var btnnode=document.createTextNode("Chat");
					var link=document.createElement("a");
					var node=document.createTextNode(txt);
					link.appendChild(node);
					butn.appendChild(btnnode);
					link.title=txt;
					link.href="#";
					var element=document.getElementById("t1");
					var rownode=document.createElement("tr");
					var cellnode=document.createElement("td");
					element.appendChild(rownode);
					rownode.appendChild(cellnode);
					cellnode.appendChild(image);
					cellnode.appendChild(link);	
					cellnode.appendChild(butn);
					var list=element.getElementsByTagName("a");
					list[i].style.textDecoration="none";
					list[i].style.display="inline";
					butn.addEventListener("click",openForm);
					butn.addEventListener("mouseup",showCount);
					
					
					
				}
				
				
				
				
				function showCount()
				{
					count++;
					console.log(count);
					
				}
				
				
				
				document.querySelector(".openChat").style.display="none";
				
				
				function openForm()
					{
						for(j=0; j<count; j++)
						{
							document.querySelector(".openChat").style.display="inline";
							document.getElementById("myTextArea").defaultValue="Hello";
						}
					}
				
				
				
				function closeForm()
				{
					document.querySelector(".openChat").style.display="none";
				}
				
				function sendForm()
				{
					
					document.getElementById("myTextArea").value+=document.getElementById("textmsg").value;
					document.getElementById("textmsg").value="";
				}
				
				
			</script>
				
		</body>
		
	
	</html>